version: "1.0"
project: zakenak
environment: prod

# Настройки развертывания
deploy:
	namespace: prod
	charts:
		- name: cert-manager
			path: ./helm-charts/cert-manager
			values:
				- values.yaml
				- values-prod.yaml
		- name: local-ca
			path: ./helm-charts/local-ca
		- name: ollama
			path: ./helm-charts/ollama
			values:
				- values-gpu.yaml
		- name: open-webui
			path: ./helm-charts/open-webui

# Настройки GPU
build:
	gpu:
		enabled: true
		runtime: nvidia
		memory: "8Gi"
		devices: "all"
		capabilities:
			- compute
			- utility
		options:
			- "device=all"
			- "require=cuda>=12.0"

# Настройки безопасности
security:
	rbac:
		enabled: true
		serviceAccount: zakenak
	networkPolicies:
		enabled: true
	podSecurityContext:
		runAsNonRoot: true
		runAsUser: 1000